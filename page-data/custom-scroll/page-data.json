{
    "componentChunkName": "component---src-templates-post-template-tsx",
    "path": "/custom-scroll/",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<p>회사에서 커스텀 스크롤을 만들 일이 있었다. 다른 라이브러리를 사용해서 구현해보고자 했지만, 내가 원하는 대로 되지 않아 직접 만들기로 하였다. (예를 들어 스크롤 위아래로 마진을 주는 기능이 없다던가…)</p>\n<p>직접 만든 스크롤은 -webkit- 전용 css 속성이 많아서 모든 브라우저에 동작하는 것이 아니고, 크롬 기반 브라우저와 Safari 위주로 돌아가게 하였다. firefox에서는 다른 css 속성으로 scroll을 변경할 수 있었는데 똑같이 하는게 힘들어서 그냥 기본 스크롤로 나오게 만들었다.\n회사에서는 Svelte로 코드를 작성했지만, 해당 포스트에서는 알아보기 쉽게 html, css, js로 작성하였다.</p>\n<h3>간단한 html</h3>\n<p>간단한 실습을 위해 만든 html은 아래와 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content-container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content-wrapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>box<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>box<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>box<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>box<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>box<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>box<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3>css 속성 살펴보기</h3>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">*</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.content-container</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100vh<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> scroll<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overflow-x</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overflow-y</span><span class=\"token punctuation\">:</span> overlay<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overscroll-behavior-y</span><span class=\"token punctuation\">:</span> contain<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> transparent<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">-webkit-background-clip</span><span class=\"token punctuation\">:</span> text<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-clip</span><span class=\"token punctuation\">:</span> text<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transition</span><span class=\"token punctuation\">:</span> background-color 300ms linear<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.content-wrapper</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> white<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #000008<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.content-container.on-scrollbar</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #e0e0e1<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.content-container::-webkit-scrollbar</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 16px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.content-container::-webkit-scrollbar-track</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> transparent<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 10px 0px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.content-container::-webkit-scrollbar-thumb</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> inherit<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 6px solid transparent<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-clip</span><span class=\"token punctuation\">:</span> content-box<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.box</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 300px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 300px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.box:nth-child(1)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> blue<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.box:nth-child(2)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> yellow<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.box:nth-child(3)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> green<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.box:nth-child(4)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> red<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.box:nth-child(5)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> orange<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">overflow-y: overlay;</code> 를 사용하면 scroll이 화면을 차지하지 않게 된다.\n하지만, firefox에서는 overlay 속성이 먹히지 않아서 <code class=\"language-text\">overflow: scroll;</code> 속성을 위에 두었다.\n<a href=\"https://caniuse.com/?search=overlay\" target=\"_blank\" rel=\"nofollow\">https://caniuse.com/?search=overlay</a> 에 의하면 safari에서는 overlay 를 인식하지만, auto로 동작한다고 한다.</p>\n<br/>\n<p><code class=\"language-text\">overscroll-behavior-y: contain;</code> 은 스크롤 체이닝이 일어나지 않게 하는 것이다. 스크롤체이닝이란 안의 요소가 스크롤이 끝나게 되면 바깥 요소로 넘어가서 스크롤이 이어지게 되는 현상을 말하는데, 해당 속성을 주게 되면 스크롤 체이닝이 일어나지 않게되어 안의 자식 요소가 스크롤이 끝나도 바깥 부모요소가 스크롤 되지 않는다.</p>\n<br/>\n<p><code class=\"language-text\">-webkit-scrollbar</code>속성의 width는 scrollbar의 전체 넓이를 의미한다.\n<code class=\"language-text\">-webkit-scrollbar-track</code> 속성은 scrollbar의 뒷 배경 부분을 의미하는데, background-color 값을 투명으로 설정하고, margin을 주어 위 아래로 공백이 생기게 하였다.\n<code class=\"language-text\">-webkit-scrollbar-thumb</code> 속성은 scrollbar를 의미하는데, background-color 가 scrollbar의 색인데, 이걸로 transition을 주려고 하니깐 먹히지 않았다. 그래서 상위 부모요소의 색을 inherit로 상속 받게 하여,\n부모요소의 색을 바꿔주고, transition을 주었다. <code class=\"language-text\">background-clip: content-box;</code>를 주어 content 부분에만 background 색이 적용되게 하였다.</p>\n<br/>\n<p>그래서 부모요소인 container에 <code class=\"language-text\">background-color: transparent;</code>를 주어 투명색을 주게 하고, <code class=\"language-text\">.on-scrollbar</code> 클래스명이 추가되면, <code class=\"language-text\">background-color: #e0e0e1;</code>을 주게 하였다.\n<code class=\"language-text\">background-clip: text;</code> 을 주어 text에 background가 채워지게 함으로써 container의 background 색이 변경되지 않게 하였다.</p>\n<p>Wrapper에는 혹시나 모를 container의 색을 대비해서 background-color 값을 주었고 하위의 글자 색이 container background-clip에 영향 받지 않도록, color 값을 주었다.</p>\n<h3>js 살펴보기</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> containerElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.content-container'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleScroll</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>containerElement<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">'on-scrollbar'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    containerElement<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'on-scrollbar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    containerElement<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'on-scrollbar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">800</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\ncontainerElement<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>container 를 selector로 가지고 온 후, scroll 이벤트를 달아주었다. scroll 이벤트에 throttle을 달아주면 좋지만, 현 코드에서는 생략하였다.\n그 후, on-scrollbar class가 없으면 on-scrollbar class를 추가하고, 0.8초 뒤에 on-scrollbar class가 사라지게 만들었다.\n그러면 css에 의해서 transition이 일어나 자연스럽게 나타났다 사라지는 것을 볼 수 있다.</p>\n<br/>\n<p>작성한 코드는 <a href=\"https://codesandbox.io/s/elegant-williams-d48eg0?file=/index.html\" target=\"_blank\" rel=\"nofollow\">https://codesandbox.io/s/elegant-williams-d48eg0?file=/index.html</a> 에서 확인할 수 있다.</p>","frontmatter":{"title":"커스텀 스크롤 만들어보기","summary":"커스텀 스크롤을 만들어 보았던 경험을 남긴다. scroll에 transition이 적용되지 않던 현상을 해결했다.","date":"2022.04.03.","categories":["Web"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxklEQVQoz62MXU7DMBCE9/53Av9WpUlxvBvHaQNFoheZCpuWiAcjpDx8mtHO7NDL0w5bQp3x2BI67hy2hMLBYc3QOYTuS329ffuKw9D7Vafq+p/iq0XFgINHkh5JOuQUIHEPHvY4ZUaeAtJ4xJwZwoeSj9IjBl9+7zskbPBADJhtQdg9/Ci+aIym+mhqXtRivUFp0miSNcZJIRXu/if73ad81mijMC8W+WyLz0u7T6eLQpMPhfldI79p/Nm9KNByfca/+GznN8ZIpK5OQt/aAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/e44408da247bdc4317e5b1c9b6a75edf/9b7d7/custom-scroll.png","srcSet":"/static/e44408da247bdc4317e5b1c9b6a75edf/5d231/custom-scroll.png 192w,\n/static/e44408da247bdc4317e5b1c9b6a75edf/e1116/custom-scroll.png 384w,\n/static/e44408da247bdc4317e5b1c9b6a75edf/9b7d7/custom-scroll.png 768w","sizes":"(min-width: 768px) 768px, 100vw"},"sources":[{"srcSet":"/static/e44408da247bdc4317e5b1c9b6a75edf/a3a09/custom-scroll.webp 192w,\n/static/e44408da247bdc4317e5b1c9b6a75edf/5358b/custom-scroll.webp 384w,\n/static/e44408da247bdc4317e5b1c9b6a75edf/81e8e/custom-scroll.webp 768w","type":"image/webp","sizes":"(min-width: 768px) 768px, 100vw"}]},"width":768,"height":402}},"publicURL":"/static/e44408da247bdc4317e5b1c9b6a75edf/custom-scroll.png"}}}}]}},"pageContext":{"slug":"/custom-scroll/"}},
    "staticQueryHashes": []}