{
    "componentChunkName": "component---src-templates-post-template-tsx",
    "path": "/nginx-413/",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<p>백엔드쪽 nginx에 파일 용량을 제한하는 설정을 추가하였다.\n<code class=\"language-text\">client_max_body_size 200M</code> 이런식으로 추가를 한 것이다.</p>\n<br/>\n<p>그러자 axios error의 response가 나오지 않기 시작하였다.\n원래 제대로 error 정보가 내려오면 <code class=\"language-text\">error.response</code> 가 존재하고, <code class=\"language-text\">error.response.status</code> 로 status를 알 수 있는데\nresponse 값이 비어있으니 에러처리를 하기가 애매했다.</p>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fcb0c23d62e35f863a698b27d2d7c8a9/cbcea/response-undefined.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 13.020833333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAjklEQVQI122J2w6CMBAF+f+vJBFBSrmUbbct6o6RGOODk8zDnNO41jGOI103EEJARREv6K5oqqQlEqWQJRPneLZKJoRK2jO6JdZlxTnH7GeaqZ249QPXS8f9ODCzr2/s4y/2ZzeMpxnNep2RfiFcPPG2UbbEo95P8xopIVFjRr1Qdj3/IxaqZPIiZ38Nygu8gugIO8+7KAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/fcb0c23d62e35f863a698b27d2d7c8a9/a59e9/response-undefined.webp 192w,\n/static/fcb0c23d62e35f863a698b27d2d7c8a9/0ca9f/response-undefined.webp 384w,\n/static/fcb0c23d62e35f863a698b27d2d7c8a9/dc9b9/response-undefined.webp 768w,\n/static/fcb0c23d62e35f863a698b27d2d7c8a9/e2c2f/response-undefined.webp 1152w,\n/static/fcb0c23d62e35f863a698b27d2d7c8a9/f3efb/response-undefined.webp 1536w,\n/static/fcb0c23d62e35f863a698b27d2d7c8a9/89420/response-undefined.webp 1758w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/fcb0c23d62e35f863a698b27d2d7c8a9/3b721/response-undefined.png 192w,\n/static/fcb0c23d62e35f863a698b27d2d7c8a9/66595/response-undefined.png 384w,\n/static/fcb0c23d62e35f863a698b27d2d7c8a9/fe486/response-undefined.png 768w,\n/static/fcb0c23d62e35f863a698b27d2d7c8a9/d2d74/response-undefined.png 1152w,\n/static/fcb0c23d62e35f863a698b27d2d7c8a9/e8464/response-undefined.png 1536w,\n/static/fcb0c23d62e35f863a698b27d2d7c8a9/cbcea/response-undefined.png 1758w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/fcb0c23d62e35f863a698b27d2d7c8a9/fe486/response-undefined.png\"\n            alt=\"response undefined\"\n            title=\"response undefined\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n<br/></p>\n<p><code class=\"language-text\">error.request &amp;&amp; !error.response</code> 때를 기준으로 처리해볼까도 했지만 그러면 413이 아닌 Nginx 에러일 경우에도\n해당 부분에서 에러처리가 되기 때문에 사용하기가 애매했다.</p>\n<p>어떤게 문제였을까? 계속 문제를 찾아보다 보니 에러에 Cors 에러가 나오는게 보였다.\n<br/></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/61df35cfe59b549909ecaa407fd1c30d/2573e/cors.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 3.6458333333333335%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAASUlEQVQI1yWKQQqAMAwE/f+/elCsLSYlSn1C0quHFlZMD8MwMEsvjC6C3+OpeIlhmaF7hiZGkwoNq9vKDYsn7KDZdDm6Jf8bCT5jpke7iHxL1QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/61df35cfe59b549909ecaa407fd1c30d/a59e9/cors.webp 192w,\n/static/61df35cfe59b549909ecaa407fd1c30d/0ca9f/cors.webp 384w,\n/static/61df35cfe59b549909ecaa407fd1c30d/dc9b9/cors.webp 768w,\n/static/61df35cfe59b549909ecaa407fd1c30d/e2c2f/cors.webp 1152w,\n/static/61df35cfe59b549909ecaa407fd1c30d/a0e10/cors.webp 1380w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/61df35cfe59b549909ecaa407fd1c30d/3b721/cors.png 192w,\n/static/61df35cfe59b549909ecaa407fd1c30d/66595/cors.png 384w,\n/static/61df35cfe59b549909ecaa407fd1c30d/fe486/cors.png 768w,\n/static/61df35cfe59b549909ecaa407fd1c30d/d2d74/cors.png 1152w,\n/static/61df35cfe59b549909ecaa407fd1c30d/2573e/cors.png 1380w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/61df35cfe59b549909ecaa407fd1c30d/fe486/cors.png\"\n            alt=\"cors\"\n            title=\"cors\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n<br/></p>\n<p>분명히 서버쪽에서는 cors 처리를 다 해놓았는데, 왜 이 에러가 나는걸까?\nNginx에서는 200<del>300 응답 말고, 400</del>500 인 에러는 cors 설정을 따로 해주지 않으면 cors 에러가 난다고 한다.\n그래서 nginx에 <code class=\"language-text\">nginx.ingress.kubernetes.io/enable-cors: 'true'</code> 설정을 추가하였다.</p>\n<br/>\n<p>그러자 error의 response가 잘 내려오는 것을 확인할 수 있었고, status에 따라 적절한 에러처리를 할 수 있었다.</p>","frontmatter":{"title":"Nginx 413 에러가 axios에서 보이지 않을 때","summary":"axios Error의 response가 undefined... nginx에러가 제대로 내려오지 않아 status를 알 수가 없는 상황...!","date":"2022.04.26.","categories":["WEB"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA4klEQVQoz61SyxLBQBDc//8H4k2icPAqCRHyfohEIQf+pdWsiFCFPTh0bc1MT+/07LK6vcQ/wWqW9pL4Fr/XhARFQD2fwB6EqqlCslRI/NQKUL4MqpeFG2+TMyKNYgfW5YTleY9pGmB+CLE6JxgnPvQshXqMc+ygnWLMDiHWWcrhXjPOpV4agFtuOjomiY9BZKHnbziUYIuOZ/DccGfzuB+aUEITLVfnHDnYYhDZkIN7z4vlirkoLEkPeyXLUsk28Z/xIl+TKv4otXyfIjz2i0RCZIfsCn0bkVvb7hpdzxASvAG7S3bINrHQXgAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/a39ead902b55942ff6a1101fb410ed1d/9b7d7/nginx-413.png","srcSet":"/static/a39ead902b55942ff6a1101fb410ed1d/5d231/nginx-413.png 192w,\n/static/a39ead902b55942ff6a1101fb410ed1d/e1116/nginx-413.png 384w,\n/static/a39ead902b55942ff6a1101fb410ed1d/9b7d7/nginx-413.png 768w","sizes":"(min-width: 768px) 768px, 100vw"},"sources":[{"srcSet":"/static/a39ead902b55942ff6a1101fb410ed1d/a3a09/nginx-413.webp 192w,\n/static/a39ead902b55942ff6a1101fb410ed1d/5358b/nginx-413.webp 384w,\n/static/a39ead902b55942ff6a1101fb410ed1d/81e8e/nginx-413.webp 768w","type":"image/webp","sizes":"(min-width: 768px) 768px, 100vw"}]},"width":768,"height":402}},"publicURL":"/static/a39ead902b55942ff6a1101fb410ed1d/nginx-413.png"}}}}]}},"pageContext":{"slug":"/nginx-413/"}},
    "staticQueryHashes": []}